# DeepPhe-Viz

Visualization of cancer patient summaries as generated by the DeepPhe NLP tools.

## Prerequisites

You must have the following tools install to build this project:

- [Nodejs 8.9.3 (includes npm 5.5.1)](https://nodejs.org/en/download/)
- [Neo4j 3.3.1](https://neo4j.com/) is used to store the graph output

Currently, we have been successfully using the [nvm](https://github.com/creationix/nvm) tool to configure and manage our NodeJS environment; nvm enables a user to associate a paritcular NodeJS and NPM version with their Unix shell, allowing for each switching between NodeJS versions across different projects.

## Getting Started

First download/clone the `DeepPhe-Viz` repo and enter the directory/

````
git clone https://github.com/DeepPhe/DeepPhe-Viz.git
cd DeepPhe-Viz
````

## Installation 

Installing this package and all its depedencies can be done with a simple command in the package root directory with no arguments:

````
npm install
````

## Configuration

There are three configuration files under the `configs/` directory:

- `cancer.json`
- `neo4j.josn`
- `server.json`

First you will need to set the data source depending if you have Breast cancer data or Melanoma cancer data loaded in the Neo4j database. Just put the cancer ID:

- Breast: `CancerSummary-Breast`
- Melanoma: `CancerSummary-Melanoma`

Then put your neo4j database connection username and password in `neo4j.json`. This assumes that have a running neo4j server and you've loaded the DeepPhe NLP gerenated data (Breast cancer data or Melanoma cancer data) into your Neo4j database. If you have set `dbms.security.auth_enabled=false` for your neo4j installation, you can set the user name and passwords to be empty strings (or ignore them).

The last configuration file is `server.json` where you can define the HTTP server host and port number.


## Launching The Viz Server

Now you can start the node server with

````
node server.js
````

This will start the web server on port 8383 by default. You can go to http://localhost:8383/patients to see the result.

Note: you can type `lsof -i :8383` to see if port 8383 is being used. 

## Development Mode

During development, you don't want to restart the server with `node server.js` every time after you make changes in the source code. [Nodemon](https://github.com/remy/nodemon) is a utility that will monitor for any changes in your source and automatically restart your server. Perfect for development. To install, 

````
npm install -g nodemon
````

Then just use `nodemon` instead of `node` to run your code, and now your process will automatically restart when your code changes.

````
nodemon server.js
````
